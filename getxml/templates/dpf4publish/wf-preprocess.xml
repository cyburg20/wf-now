<?xml version="1.0" encoding="ISO-8859-1"?>
<DPF>
  <config>
    <workflows>
      <DPF4Publish.Preprocess
        COMMENT=""
        DPFINT-Customer="0"
        DPFINT-Interactive="0"
        DPFINT-Type="WorkflowDescription"
        NAME="Preprocess"
        PROJECT="DPF4Publish"
        VERSION="$Id: wf-preprocess.xml,v 1.37 2013/07/04 14:52:20 sek Exp $"
        >
        <AnalyzePdfs
          COMMENT="Count pages for each pdf and tiff file.





Check encryption status for each pdf file."
          ERROR="END"
          NAME="Rli.analyzePdfs"
          NEXT="IfWantDecryption2"
          POSX="700"
          POSY="700"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING
            IgnoreErrors="Y"
            />
        </AnalyzePdfs>
        <AnalyzePdfsAgain
          COMMENT="Count pages for each pdf and tiff file.





Check encryption status for each pdf file."
          ERROR="END"
          NAME="Rli.analyzePdfs"
          NEXT="SetAnalyzeErrSheetsAndRemovePortfolios"
          POSX="500"
          POSY="1100"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING
            IgnoreErrors="Y"
            />
        </AnalyzePdfsAgain>
        <AnalyzePdfsFinal
          COMMENT=""
          ERROR="END"
          NAME="Rli.analyzePdfs"
          NEXT="END"
          POSX="500"
          POSY="1700"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS>
            <IgnoreErrors
              val="N"
              />
            <RlicCrypted
              val="Crypted"
              />
            <RlicFileName
              val="CurrFileName"
              />
            <UsPaperSizes
              val="N"
              />
            <WuEnableDebugLoop
              val="N"
              />
          </DEFAULTS>
          <MAPPING/>
        </AnalyzePdfsFinal>
        <ConvertFiles2Pdf
          COMMENT=""
          ERROR="END"
          NAME="Rli.processLines"
          NEXT="ExpandStructuredMsgFilesFromRli"
          POSX="1100"
          POSY="300"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING
            FilterPrefix="%WFPOSITION%"
            SubProcess="DPF4CONVERT.DPF4Convert_Convert2PDF"
            SubProcessResult="DESTINATION_FORMAT_QUALITY STRUCTURED_RESULT_FILE ERR_REASON PDFINFO_FILE PDFINFO_METADATA_FILE PDFINFO_XFA_TYPE PDFINFO_FILE_MODIFIED PDFINFO_IS_PROTECTED"
            />
        </ConvertFiles2Pdf>
        <CreateAnalyzeErrSheets
          COMMENT=""
          ERROR="END"
          NAME="Rli.createSheets"
          NEXT="AnalyzePdfsFinal"
          POSX="500"
          POSY="1500"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS>
            <COVER_ShowSinglePage
              val="N"
              />
            <DEFAULT_COLOR
              val="#000000"
              />
            <DEFAULT_FONT
              val="Helvetica"
              />
            <DEFAULT_SIZE
              val="20"
              />
            <UpdatePageCount
              val="N"
              />
            <WuEnableDebugLoop
              val="N"
              />
          </DEFAULTS>
          <MAPPING
            FilterPrefix="%WFPOSITION%"
            LABEL_LIST="%SheetsLabelList%"
            />
        </CreateAnalyzeErrSheets>
        <CreateConvertErrSheets
          COMMENT=""
          ERROR="END"
          NAME="Rli.createSheets"
          NEXT="IfWantPageNumbers"
          POSX="700"
          POSY="500"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS>
            <COVER_ShowSinglePage
              val="N"
              />
            <DEFAULT_COLOR
              val="#000000"
              />
            <DEFAULT_FONT
              val="Helvetica"
              />
            <DEFAULT_SIZE
              val="20"
              />
            <UpdatePageCount
              val="N"
              />
            <WuEnableDebugLoop
              val="N"
              />
          </DEFAULTS>
          <MAPPING
            FilterPrefix="%WFPOSITION%"
            LABEL_LIST="%SheetsLabelList%"
            RlicAttachFile="%RlicAttachFileToErrorSheet%"
            />
        </CreateConvertErrSheets>
        <DEFAULTS
          DPF4Publish.UserExitAfterConversion="DPF4Publish.UserExitAfterConversion"
          DPF4Publish.UserExitBeforePreprocess="DPF4Publish.UserExitBeforePreprocess"
          WantPreprocess="Y"
          />
        <DecryptAllPdfsOfRli
          COMMENT="Decrypt encryped pdfs."
          ERROR="END"
          NAME="Rli.DecryptAllPdfsOfRli"
          NEXT="AnalyzePdfsAgain"
          POSX="700"
          POSY="900"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING
            FilterPrefix="%WFPOSITION%"
            IgnoreErrors="Y"
            />
        </DecryptAllPdfsOfRli>
        <END
          COMMENT=""
          NAME="END"
          POSX="200"
          POSY="100"
          TYPE="STOP"
          />
        <ExpandStructuredFilesFromRli
          COMMENT=""
          ERROR="END"
          NAME="Rli.ExpandStructuredFilesFromRli"
          NEXT="ConvertFiles2Pdf"
          POSX="900"
          POSY="300"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS>
            <PdfCollectionIni
              val="%PLSSV%/dpf/conf/dpf4publish/pdfcollection.ini"
              />
            <RlicChapterDepth
              val="LEVEL"
              />
            <RlicChapterName1
              val="Beschreibung"
              />
          </DEFAULTS>
          <MAPPING
            FilterOperator="=~"
            FilterValue="/\.pdf$/i"
            RlicFilter="CurrFileName"
            />
        </ExpandStructuredFilesFromRli>
        <ExpandStructuredMsgFilesFromRli
          COMMENT=""
          ERROR="END"
          NAME="Rli.ExpandStructuredMsgFilesFromRli"
          NEXT="UserExitAfterConversion"
          POSX="1300"
          POSY="500"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS>
            <RlicChapterDepth
              val="LEVEL"
              />
            <RlicChapterName1
              val="Beschreibung"
              />
          </DEFAULTS>
          <MAPPING/>
        </ExpandStructuredMsgFilesFromRli>
        <IfWantAutoConvertTiff2Pdf
          COMMENT=""
          ELSE="IfWantConvertFiles"
          OPERATOR="eq"
          POSX="500"
          POSY="100"
          PROPERTY="WantAutoConvertTiff2Pdf"
          THEN="Tiff2Pdf"
          TYPE="IF-THEN-ELSE"
          VALUE=""
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </IfWantAutoConvertTiff2Pdf>
        <IfWantConvertFiles
          COMMENT="Get page numbers of documents in the reprolist?"
          ELSE="IfWantPageNumbers"
          OPERATOR="is true"
          POSX="500"
          POSY="300"
          PROPERTY="WantConvertFiles"
          THEN="SaveErrReasonBeforeConversion"
          TYPE="IF-THEN-ELSE"
          VALUE=""
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </IfWantConvertFiles>
        <IfWantDecryption
          COMMENT="Decrypt encryped pdfs?"
          ELSE="IfWantDecryption2"
          OPERATOR="is true"
          POSX="500"
          POSY="700"
          PROPERTY="WantDecryption"
          THEN="AnalyzePdfs"
          TYPE="IF-THEN-ELSE"
          VALUE=""
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </IfWantDecryption>
        <IfWantDecryption2
          COMMENT="Decrypt encryped pdfs?"
          ELSE="AnalyzePdfsAgain"
          OPERATOR="is true"
          POSX="500"
          POSY="900"
          PROPERTY="WantDecryption"
          THEN="DecryptAllPdfsOfRli"
          TYPE="IF-THEN-ELSE"
          VALUE=""
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </IfWantDecryption2>
        <IfWantPageNumbers
          COMMENT="Get page numbers of documents in the reprolist?"
          ELSE="NoPageNumbers"
          OPERATOR="is true"
          POSX="500"
          POSY="500"
          PROPERTY="WantPageNumbers"
          THEN="AnalyzePdfs"
          TYPE="IF-THEN-ELSE"
          VALUE=""
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </IfWantPageNumbers>
        <MAIN
          BEGIN="UserExitBeforePreprocess"
          NAME=""
          />
        <MAPPING/>
        <NoPageNumbers
          COMMENT="Do not calculate page numbers for toc."
          NEXT="IfWantDecryption"
          POSX="300"
          POSY="700"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            RlicPageNumber="deactivated"
            />
        </NoPageNumbers>
        <SaveErrReasonBeforeConversion
          COMMENT=""
          ERROR="END"
          NAME="Rli.fillRliColumn"
          NEXT="ExpandStructuredFilesFromRli"
          POSX="700"
          POSY="300"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS>
            <Replacement
              val="_"
              />
            <UseEval
              val="N"
              />
            <WuEnableDebugLoop
              val="N"
              />
          </DEFAULTS>
          <MAPPING
            FillColumn="ErrReasonBeforeConversion"
            FillData="%%ErrReason%%"
            />
        </SaveErrReasonBeforeConversion>
        <SetAnalyzeErrSheetsAndRemovePortfolios
          COMMENT="Remove PageCount and CurrFileName from portfolio rli lines to link the line to the next pdf in rli and to prevent counting non existing pages."
          ERROR="END"
          NAME="Rli.fillRliColumn"
          NEXT="CreateAnalyzeErrSheets"
          POSX="500"
          POSY="1300"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS>
            <Replacement
              val="_"
              />
            <UseEval
              val="N"
              />
            <WuEnableDebugLoop
              val="N"
              />
          </DEFAULTS>
          <MAPPING
            ValueSets="%SetAnalyzeErrSheetsAndRemovePortfoliosValueSets%"
            />
        </SetAnalyzeErrSheetsAndRemovePortfolios>
        <SetConvertErrSheetsAndRestoreErrReason
          COMMENT=""
          ERROR="END"
          NAME="Rli.fillRliColumn"
          NEXT="CreateConvertErrSheets"
          POSX="900"
          POSY="500"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS>
            <Replacement
              val="_"
              />
            <UseEval
              val="N"
              />
            <WuEnableDebugLoop
              val="N"
              />
          </DEFAULTS>
          <MAPPING
            ValueSets="%SetConvertErrSheetsAndRestoreErrReasonValueSets%"
            />
        </SetConvertErrSheetsAndRestoreErrReason>
        <Tiff2Pdf
          COMMENT="Always convert tif files to pdf."
          ERROR="END"
          NAME="Rli.tiff2pdf"
          NEXT="IfWantConvertFiles"
          POSX="700"
          POSY="100"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING
            FilterPrefix="%WFPOSITION%"
            />
        </Tiff2Pdf>
        <UserExitAfterConversion
          COMMENT=""
          ERROR="END"
          NEXT="SetConvertErrSheetsAndRestoreErrReason"
          POSX="1100"
          POSY="500"
          TYPE="USER_EXIT"
          USE="%DPF4Publish.UserExitAfterConversion%"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </UserExitAfterConversion>
        <UserExitBeforePreprocess
          COMMENT="user exit before standard distribute process.




customize it in publish.customer.ini with keyword 





DPF4Publish.UserExitBeforePreprocess = ...





use internal process name to call instead empty default."
          ERROR="END"
          NEXT="ifWantPreprocess"
          POSX="100"
          POSY="100"
          TYPE="USER_EXIT"
          USE="%DPF4Publish.userExitBeforePreprocess%"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </UserExitBeforePreprocess>
        <ifWantPreprocess
          COMMENT=""
          ELSE="END"
          OPERATOR="is true"
          POSX="300"
          POSY="100"
          PROPERTY="WantPreprocess"
          THEN="IfWantAutoConvertTiff2Pdf"
          TYPE="IF-THEN-ELSE"
          VALUE=""
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </ifWantPreprocess>
      </DPF4Publish.Preprocess>
    </workflows>
  </config>
</DPF>
