<?xml version="1.0" encoding="ISO-8859-1"?>
<DPF>
  <config>
    <workflows>
      <DPF4Publish.Retrieve
        COMMENT=""
        DPFINT-Customer="0"
        DPFINT-Interactive="0"
        DPFINT-Type="WorkflowDescription"
        NAME="Retrieve"
        PROJECT="DPF4Publish"
        VERSION="$Id: wf-retrieve.xml,v 1.17 2013/07/04 14:52:21 sek Exp $"
        >
        <CopyJobFiles
          COMMENT="Copy documents to job directory."
          ERROR="END"
          NAME="Rli.copyFiles"
          NEXT="SetCopyFilesMissingSheets"
          POSX="300"
          POSY="500"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING
            AutoTargetFileName="%CopyJobFilesAutoTargetFileName%"
            FilterPrefix="%WFPOSITION%"
            IgnoreMissingFiles="Y"
            SourceFileRlic="%CopyJobFilesSourceFileRlic%"
            TargetFileRlic="%CopyJobFilesTargetFileRlic%"
            />
        </CopyJobFiles>
        <CreateCopyFilesMissingSheets
          COMMENT=""
          ERROR="END"
          NAME="Rli.createSheets"
          NEXT="DeactivateSourceFileName"
          POSX="700"
          POSY="500"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS>
            <COVER_ShowSinglePage
              val="N"
              />
            <DEFAULT_COLOR
              val="#000000"
              />
            <DEFAULT_FONT
              val="Helvetica"
              />
            <DEFAULT_SIZE
              val="20"
              />
            <UpdatePageCount
              val="N"
              />
            <WuEnableDebugLoop
              val="N"
              />
          </DEFAULTS>
          <MAPPING
            FilterPrefix="%WFPOSITION%"
            LABEL_LIST="%SheetsLabelList%"
            />
        </CreateCopyFilesMissingSheets>
        <CreateSapErrSheets
          COMMENT=""
          ERROR="END"
          NAME="Rli.createSheets"
          NEXT="IfWantCopyInputFiles"
          POSX="700"
          POSY="300"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS>
            <COVER_ShowSinglePage
              val="N"
              />
            <DEFAULT_COLOR
              val="#000000"
              />
            <DEFAULT_FONT
              val="Helvetica"
              />
            <DEFAULT_SIZE
              val="20"
              />
            <UpdatePageCount
              val="N"
              />
            <WuEnableDebugLoop
              val="N"
              />
          </DEFAULTS>
          <MAPPING
            FilterPrefix="%WFPOSITION%"
            LABEL_LIST="%SheetsLabelList%"
            />
        </CreateSapErrSheets>
        <DEFAULTS
          DPF4Publish.UserExitBeforeRetrieve="DPF4Publish.UserExitBeforeRetrieve"
          WantRetrieve="Y"
          />
        <DeactivateSourceFileName
          COMMENT="Prevent DPF4CONVERT.DPF4Convert_Convert2PDF from using SourceFileName instead of CurrFileName as input file."
          ERROR="END"
          NAME="Rli.renameColumns"
          NEXT="SetCurrFileType"
          POSX="900"
          POSY="500"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="HORIZONTAL"
            />
          <DEFAULTS/>
          <MAPPING
            RenameSourceColumns="SourceFileName"
            RenameTargetColumns="SourceFileNameOff"
            />
        </DeactivateSourceFileName>
        <END
          COMMENT=""
          NAME="END"
          POSX="200"
          POSY="300"
          TYPE="STOP"
          />
        <IfWantCopyInputFiles
          COMMENT="Copy documents to job directory?"
          ELSE="SetCurrFileType"
          OPERATOR="is true"
          POSX="100"
          POSY="500"
          PROPERTY="WantCopyInputFiles"
          THEN="CopyJobFiles"
          TYPE="IF-THEN-ELSE"
          VALUE=""
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </IfWantCopyInputFiles>
        <IfWantSapCheckout
          COMMENT="Checkout documents from sap?"
          ELSE="IfWantCopyInputFiles"
          OPERATOR="is true"
          POSX="100"
          POSY="300"
          PROPERTY="WantSapCheckout"
          THEN="SapCheckout"
          TYPE="IF-THEN-ELSE"
          VALUE=""
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </IfWantSapCheckout>
        <MAIN
          BEGIN="UserExitBeforeRetrieve"
          NAME=""
          />
        <MAPPING/>
        <SapCheckout
          COMMENT="Checkout documents from sap."
          ERROR="END"
          NAME="Sap.checkoutWithRli"
          NEXT="SetSapErrSheets"
          POSX="300"
          POSY="300"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING
            FilterPrefix="%WFPOSITION%"
            WU_ENABLE_DEBUG_LOOP="N"
            />
        </SapCheckout>
        <SetCopyFilesMissingSheets
          COMMENT=""
          ERROR="END"
          NAME="Rli.fillRliColumn"
          NEXT="CreateCopyFilesMissingSheets"
          POSX="500"
          POSY="500"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS>
            <Replacement
              val="_"
              />
            <UseEval
              val="N"
              />
            <WuEnableDebugLoop
              val="N"
              />
          </DEFAULTS>
          <MAPPING
            ValueSets="%SetCopyFilesMissingSheetsValueSets%"
            />
        </SetCopyFilesMissingSheets>
        <SetCurrFileType
          COMMENT="Derive document type from its extension."
          ERROR="END"
          NAME="Rli.fillRliColumn"
          NEXT="END"
          POSX="100"
          POSY="700"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING
            FillColumn="CurrFileType"
            FillData="%%CurrFileName.extension%%"
            FilterOperator="-f"
            RlicFilter="CurrFileName"
            />
        </SetCurrFileType>
        <SetSapErrSheets
          COMMENT=""
          ERROR="END"
          NAME="Rli.fillRliColumn"
          NEXT="CreateSapErrSheets"
          POSX="500"
          POSY="300"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS>
            <Replacement
              val="_"
              />
            <UseEval
              val="N"
              />
            <WuEnableDebugLoop
              val="N"
              />
          </DEFAULTS>
          <MAPPING
            FillColumn="COVER_BACKGROUND_PDF"
            FillData="%PLSSV%/dpf/conf/dpf4publish/%%CreateErrSheet%%.pdf"
            FilterPrefix="%WFPOSITION%"
            />
        </SetSapErrSheets>
        <UserExitBeforeRetrieve
          COMMENT=""
          ERROR="END"
          NEXT="ifWantRetrieve"
          POSX="100"
          POSY="100"
          TYPE="USER_EXIT"
          USE="%DPF4Publish.UserExitBeforeRetrieve%"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </UserExitBeforeRetrieve>
        <ifWantRetrieve
          COMMENT=""
          ELSE="END"
          OPERATOR="is true"
          POSX="300"
          POSY="100"
          PROPERTY="WantRetrieve"
          THEN="IfWantSapCheckout"
          TYPE="IF-THEN-ELSE"
          VALUE=""
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </ifWantRetrieve>
      </DPF4Publish.Retrieve>
    </workflows>
  </config>
</DPF>
