<?xml version="1.0" encoding="ISO-8859-1"?>
<DPF>
  <config>
    <workflows>
      <Test.receiveDirTree
        COMMENT=""
        DPFINT-Type="WorkflowDescription"
        NAME="Receive Dir Tree"
        PROJECT="Test"
        VERSION="$Id: wf-receivedirtree.xml,v 1.2 2010/07/08 15:34:10 stefan Exp $"
        >
        <DEFAULTS/>
        <END
          COMMENT=""
          NAME="END"
          POSX="200"
          POSY="100"
          TYPE="STOP"
          />
        <MAIN
          BEGIN="createSubdir"
          NAME=""
          />
        <MAPPING/>
        <MODIFY1
          COMMENT=""
          NEXT="ifTargetGiven"
          POSX="500"
          POSY="100"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            MeinTollesFile="%JOBDIR%/subdir/subdir2/subdir3/file3.txt"
            />
        </MODIFY1>
        <copyFilesToSubdir
          COMMENT=""
          ERROR="END"
          NAME="FileTransfer.copyFiles"
          NEXT="MODIFY1"
          POSX="400"
          POSY="200"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS>
            <COPY_DEBUG
              val="N"
              />
            <WU_ENABLE_DEBUG_LOOP
              val="N"
              />
          </DEFAULTS>
          <MAPPING
            COPY_SOURCE_PROPERTIES="Input1 Input1 Input1"
            COPY_TARGET_PROPERTIES="Output1 Output2 Output3"
            Input1="%JOBDIR%/job.log"
            Output1="%JOBDIR%/subdir/file1.txt"
            Output2="%JOBDIR%/subdir/subdir2/file2.txt"
            Output3="%JOBDIR%/subdir/subdir2/subdir3/file3.txt"
            />
        </copyFilesToSubdir>
        <createSubdir
          COMMENT=""
          ERROR="END"
          NAME="FileSystem.mkPath"
          NEXT="copyFilesToSubdir"
          POSX="200"
          POSY="200"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS>
            <DIRECTORY
              val=""
              />
          </DEFAULTS>
          <MAPPING
            DIRECTORY="%JOBDIR%/subdir/subdir2/subdir3"
            />
        </createSubdir>
        <ifTargetGiven
          COMMENT=""
          ELSE="useDefaultTargetSubdir"
          OPERATOR="exists"
          POSX="600"
          POSY="200"
          PROPERTY="TargetFileName"
          THEN="sendBackSubdir"
          TYPE="IF-THEN-ELSE"
          VALUE=""
          >
          <CONNECTIONS
            ELSE="VERTICAL"
            THEN="DIRECT"
            />
        </ifTargetGiven>
        <sendBackSubdir
          COMMENT=""
          ERROR="END"
          NAME="sendback"
          NEXT="END"
          POSX="800"
          POSY="200"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS>
            <IOR
              val="%ORIGFILESERVERIOR%"
              />
            <OVERWRITE
              val="Y"
              />
            <SOURCE
              val="%CURRFILENAME%"
              />
            <TARGETFILE
              val="%TARGETFILENAME%"
              />
          </DEFAULTS>
          <MAPPING
            SOURCE="%JOBDIR%/subdir"
            />
        </sendBackSubdir>
        <useDefaultTargetSubdir
          COMMENT=""
          NEXT="sendBackSubdir"
          POSX="600"
          POSY="400"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            TargetFileName="subdir"
            />
        </useDefaultTargetSubdir>
      </Test.receiveDirTree>
    </workflows>
  </config>
</DPF>
