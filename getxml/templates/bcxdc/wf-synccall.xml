<?xml version="1.0" encoding="ISO-8859-1"?>
<DPF>
  <config>
    <workflows>
      <BCXDC.synccall
        COMMENT=""
        DPFINT-Type="WorkflowDescription"
        NAME="Synccall"
        PROJECT="BCXDC"
        VERSION="$Id: wf-synccall.xml,v 1.11 2014/11/17 10:46:00 kig Exp $"
        >
        <BCXDC.UserPostBcxdcSynccall
          COMMENT=""
          ERROR="modifytargetfile"
          NEXT="sendback"
          POSX="4200"
          POSY="400"
          TYPE="SWF"
          USE="BCXDC.UserPostBcxdcSynccall"
          >
          <CONNECTIONS
            ERROR="HORIZONTAL"
            NEXT="VERTICAL"
            />
          <DEFAULTS/>
          <MAPPING/>
        </BCXDC.UserPostBcxdcSynccall>
        <BCXDC.UserPreBcxdcSynccall
          COMMENT=""
          ERROR="modifytargetfile"
          NEXT="setup_conversion_params"
          POSX="700"
          POSY="400"
          TYPE="SWF"
          USE="BCXDC.UserPreBcxdcSynccall"
          >
          <CONNECTIONS
            ERROR="HORIZONTAL"
            NEXT="VERTICAL"
            />
          <DEFAULTS/>
          <MAPPING/>
        </BCXDC.UserPreBcxdcSynccall>
        <BCXDC.initandmapvalues
          COMMENT=""
          ERROR="modifytargetfile"
          NEXT="check_for_user_pre_bcxdc_synccall"
          POSX="500"
          POSY="200"
          TYPE="SWF"
          USE="BCXDC.initandmapvalues"
          >
          <CONNECTIONS
            ERROR="HORIZONTAL"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </BCXDC.initandmapvalues>
        <DEFAULTS/>
        <DPF4CONVERT.DPF4Convert_Convert2PDF
          COMMENT=""
          ERROR="modifytargetfile"
          NEXT="check_for_targetformat_jpg"
          POSX="1100"
          POSY="200"
          TYPE="SWF"
          USE="DPF4CONVERT.DPF4Convert_Convert2PDF"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </DPF4CONVERT.DPF4Convert_Convert2PDF>
        <DPF4CONVERT.create_thumbnail
          COMMENT=""
          ERROR="modifytargetfile"
          NAME="DPF4CONVERT.create_thumbnail"
          NEXT="check_for_targetformat"
          POSX="1500"
          POSY="700"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="HORIZONTAL"
            NEXT="DIRECT"
            />
          <DEFAULTS>
            <DPF4C_THUMBNAIL_DPI
              val="72"
              />
            <DPF4C_THUMBNAIL_SIZE
              val="200"
              />
          </DEFAULTS>
          <MAPPING/>
        </DPF4CONVERT.create_thumbnail>
        <DPF4CONVERT.pdfpostproc
          COMMENT=""
          ERROR="modifytargetfile"
          NEXT="modify_targetfilename"
          POSX="3800"
          POSY="400"
          TYPE="SWF"
          USE="DPF4CONVERT.pdfpostproc"
          >
          <CONNECTIONS
            ERROR="HORIZONTAL"
            NEXT="VERTICAL"
            />
          <DEFAULTS/>
          <MAPPING/>
        </DPF4CONVERT.pdfpostproc>
        <DPF4CONVERT.prnconv
          COMMENT=""
          ERROR="modifytargetfile"
          NAME="DPF4CONVERT.prnconv"
          NEXT="check_for_pdfpostproc"
          POSX="3400"
          POSY="400"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="HORIZONTAL"
            NEXT="VERTICAL"
            />
          <DEFAULTS
            SCALETYPE="fit"
            >
            <AUTOROTATE
              val="Y"
              />
            <PRINTERDIR
              val="%DPFSRV%/conf/prnconv"
              />
            <SCALEFACTOR
              val="1.0"
              />
            <SCALETYPE
              val="original"
              />
          </DEFAULTS>
          <MAPPING
            SCALETYPE="fit"
            />
        </DPF4CONVERT.prnconv>
        <DPF4CONVERT.readcustomconfig
          COMMENT=""
          ERROR="END"
          NAME="DPF4CONVERT.readcustomconfig"
          NEXT="BCXDC.initandmapvalues"
          POSX="300"
          POSY="200"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING
            DPF4C_CUSTOM_CONFIG="bcxdc::synccall"
            />
        </DPF4CONVERT.readcustomconfig>
        <END
          COMMENT=""
          NAME="END"
          POSX="4100"
          POSY="200"
          TYPE="STOP"
          />
        <IF-THEN-ELSE2
          COMMENT=""
          ELSE="check_for_running_in_prnconv"
          OPERATOR="eq"
          POSX="1300"
          POSY="400"
          PROPERTY="SAVE_ORI_TARGETFORMAT"
          THEN="check_for_thumbnail"
          TYPE="IF-THEN-ELSE"
          VALUE="png"
          >
          <CONNECTIONS
            ELSE="VERTICAL"
            THEN="DIRECT"
            />
        </IF-THEN-ELSE2>
        <MAIN
          BEGIN="MODIFY_CONVERSION_PARAMS"
          NAME=""
          />
        <MAPPING/>
        <MODIFY_CONVERSION_PARAMS
          COMMENT=""
          NEXT="DPF4CONVERT.readcustomconfig"
          POSX="100"
          POSY="200"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            CURRFILENAME="%INFILE1%"
            SAVE_ORI_TARGETFORMAT="%TARGETFORMAT%"
            />
        </MODIFY_CONVERSION_PARAMS>
        <check_for_jpg
          COMMENT=""
          ELSE="check_for_png"
          OPERATOR="exists"
          POSX="1900"
          POSY="700"
          PROPERTY="DPF4C_COMMON_OUTFILEjpg"
          THEN="set_correct_currfilename_jpg"
          TYPE="IF-THEN-ELSE"
          VALUE=""
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_for_jpg>
        <check_for_pdfpostproc
          COMMENT=""
          ELSE="modify_targetfilename"
          OPERATOR="eq"
          POSX="3600"
          POSY="200"
          PROPERTY="CURRFILETYPE"
          THEN="DPF4CONVERT.pdfpostproc"
          TYPE="IF-THEN-ELSE"
          VALUE="pdf"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="HORIZONTAL"
            />
        </check_for_pdfpostproc>
        <check_for_png
          COMMENT=""
          ELSE="check_for_running_in_prnconv"
          OPERATOR="is file"
          POSX="1900"
          POSY="1000"
          PROPERTY="DPF4C_COMMON_OUTFILEpng"
          THEN="set_correct_currfilename_png"
          TYPE="IF-THEN-ELSE"
          VALUE=""
          >
          <CONNECTIONS
            ELSE="HORIZONTAL"
            THEN="DIRECT"
            />
        </check_for_png>
        <check_for_running_in_prnconv
          COMMENT=""
          ELSE="restore_targetformat"
          OPERATOR="eq"
          POSX="2900"
          POSY="200"
          PROPERTY="TARGETFORMAT"
          THEN="check_for_running_in_prnconv2"
          TYPE="IF-THEN-ELSE"
          VALUE="%SAVE_ORI_TARGETFORMAT%"
          >
          <CONNECTIONS
            ELSE="HORIZONTAL"
            THEN="DIRECT"
            />
        </check_for_running_in_prnconv>
        <check_for_running_in_prnconv2
          COMMENT=""
          ELSE="check_for_pdfpostproc"
          OPERATOR="eq"
          POSX="3100"
          POSY="200"
          PROPERTY="ACTIVATE_PRNCONV"
          THEN="restore_targetformat"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="HORIZONTAL"
            />
        </check_for_running_in_prnconv2>
        <check_for_switch_do_user_post_bcxdc_synccall
          COMMENT=""
          ELSE="sendback"
          OPERATOR="eq"
          POSX="4200"
          POSY="200"
          PROPERTY="SWITCH_DO_USER_POST_BCXDC_SYNCCALL"
          THEN="BCXDC.UserPostBcxdcSynccall"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_for_switch_do_user_post_bcxdc_synccall>
        <check_for_targetformat
          COMMENT=""
          ELSE="check_for_running_in_prnconv"
          OPERATOR="eq"
          POSX="1700"
          POSY="700"
          PROPERTY="SAVE_ORI_TARGETFORMAT"
          THEN="check_for_jpg"
          TYPE="IF-THEN-ELSE"
          VALUE="%DPF4C_THUMBNAIL_FORMAT%"
          >
          <CONNECTIONS
            ELSE="HORIZONTAL"
            THEN="DIRECT"
            />
        </check_for_targetformat>
        <check_for_targetformat_jpg
          COMMENT=""
          ELSE="IF-THEN-ELSE2"
          OPERATOR="eq"
          POSX="1300"
          POSY="200"
          PROPERTY="SAVE_ORI_TARGETFORMAT"
          THEN="check_for_thumbnail"
          TYPE="IF-THEN-ELSE"
          VALUE="jpg"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="VERTICAL"
            />
        </check_for_targetformat_jpg>
        <check_for_thumbnail
          COMMENT=""
          ELSE="check_for_running_in_prnconv"
          OPERATOR="is true"
          POSX="1500"
          POSY="500"
          PROPERTY="BCXDC_CREATE_THUMBNAIL"
          THEN="DPF4CONVERT.create_thumbnail"
          TYPE="IF-THEN-ELSE"
          VALUE=""
          >
          <CONNECTIONS
            ELSE="HORIZONTAL"
            THEN="DIRECT"
            />
        </check_for_thumbnail>
        <check_for_user_pre_bcxdc_synccall
          COMMENT=""
          ELSE="setup_conversion_params"
          OPERATOR="eq"
          POSX="700"
          POSY="200"
          PROPERTY="SWITCH_DO_USER_PRE_BCXDC_SYNCCALL"
          THEN="BCXDC.UserPreBcxdcSynccall"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_for_user_pre_bcxdc_synccall>
        <get_jobstate
          COMMENT=""
          ERROR="END"
          NAME="get_jobstate"
          NEXT="sendbackC"
          POSX="1100"
          POSY="800"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </get_jobstate>
        <modify_targetfilename
          COMMENT=""
          NEXT="check_for_switch_do_user_post_bcxdc_synccall"
          POSX="4000"
          POSY="200"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            BCXDCTARGETFILENAME="convertJob.%TARGETFORMAT%"
            />
        </modify_targetfilename>
        <modifytargetfile
          COMMENT=""
          NEXT="get_jobstate"
          POSX="1100"
          POSY="600"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            TARGETFILE="DpfStatus.txt"
            />
        </modifytargetfile>
        <restore_targetformat
          COMMENT=""
          NEXT="DPF4CONVERT.prnconv"
          POSX="3200"
          POSY="400"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            TARGETFORMAT="%SAVE_ORI_TARGETFORMAT%"
            />
        </restore_targetformat>
        <sendback
          COMMENT=""
          ERROR="modifytargetfile"
          NAME="sendback"
          NEXT="END"
          POSX="4400"
          POSY="200"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="HORIZONTAL"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING
            SOURCE_FILE_PROPERTIES="CURRFILENAME"
            TARGET_FILE_PROPERTIES="BCXDCTARGETFILENAME"
            />
        </sendback>
        <sendbackC
          COMMENT=""
          ERROR="END"
          NAME="sendback"
          NEXT="END"
          POSX="1100"
          POSY="1000"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </sendbackC>
        <set_correct_currfilename_jpg
          COMMENT=""
          NEXT="modify_targetfilename"
          POSX="2100"
          POSY="700"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="VERTICAL"
            />
          <SET
            CURRFILENAME="%DPF4C_COMMON_OUTFILEjpg%"
            TARGETFORMAT="jpg"
            />
        </set_correct_currfilename_jpg>
        <set_correct_currfilename_png
          COMMENT=""
          NEXT="modify_targetfilename"
          POSX="2100"
          POSY="1000"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="VERTICAL"
            />
          <SET
            CURRFILENAME="%DPF4C_COMMON_OUTFILEpng%"
            TARGETFORMAT="png"
            />
        </set_correct_currfilename_png>
        <setup_conversion_params
          COMMENT=""
          NEXT="DPF4CONVERT.DPF4Convert_Convert2PDF"
          POSX="900"
          POSY="200"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            DPF4C_COMMON_DEST_FORMAT="pdf"
            TARGETFORMAT="pdf"
            />
        </setup_conversion_params>
      </BCXDC.synccall>
    </workflows>
  </config>
</DPF>
