<?xml version="1.0" encoding="ISO-8859-1"?>
<DPF>
  <config>
    <workflows>
      <sap_conv_multi
        COMMENT="Convert multiple document from SAP-integration into a single or multiple documents."
        DPFINT-Customer="0"
        DPFINT-Interactive="1"
        DPFINT-Type="WorkflowDescription"
        NAME="DPF 4 Convert - Sapconvmulti"
        PROJECT="DPF4CONVERT"
        VERSION="$Id: wf-sap_conv_multi.xml,v 1.12 2015/03/09 07:51:00 kig Exp $"
        >
        <DEFAULTS/>
        <END
          COMMENT=""
          NAME="END"
          POSX="1000"
          POSY="3200"
          TYPE="STOP"
          />
        <MAIN
          BEGIN="version_dpf4c"
          NAME=""
          />
        <MAPPING/>
        <check_destfilename
          COMMENT=""
          ELSE="set_default_destfilename"
          OPERATOR="exists"
          POSX="400"
          POSY="900"
          PROPERTY="DESTFILENAME"
          THEN="save_destfilename"
          TYPE="IF-THEN-ELSE"
          VALUE=""
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_destfilename>
        <check_merge
          COMMENT=""
          ELSE="check_user_pre_checkin"
          OPERATOR="eq"
          POSX="200"
          POSY="900"
          PROPERTY="SAP_CONV_MULTI_ENABLE_PDF_MERGE"
          THEN="check_destfilename"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="VERTICAL"
            THEN="DIRECT"
            />
        </check_merge>
        <check_pdfa
          COMMENT=""
          ELSE="pdfpostproc"
          OPERATOR="contains"
          POSX="400"
          POSY="1900"
          PROPERTY="DESTINATION_FORMAT_QUALITY"
          THEN="enable_pdfadapt"
          TYPE="IF-THEN-ELSE"
          VALUE="pdfa"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_pdfa>
        <check_sap_char_update
          COMMENT=""
          ELSE="check_skip_checkin"
          OPERATOR="contains"
          POSX="200"
          POSY="2600"
          PROPERTY="SAP_CHAR_UPDATE"
          THEN="write_std_params1"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_sap_char_update>
        <check_skip_checkin
          COMMENT=""
          ELSE="sap_conv_multi_checkin"
          OPERATOR="eq"
          POSX="200"
          POSY="2800"
          PROPERTY="SAP_CONV_MULTI_SKIP_CHECKIN"
          THEN="END"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="VERTICAL"
            />
        </check_skip_checkin>
        <check_stamp
          COMMENT=""
          ELSE="check_pdfa"
          OPERATOR="eq"
          POSX="400"
          POSY="1700"
          PROPERTY="SAP_CONV_MULTI_STAMP"
          THEN="pdfstamp"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_stamp>
        <check_user_pre_checkin
          COMMENT=""
          ELSE="check_sap_char_update"
          OPERATOR="eq"
          POSX="200"
          POSY="2400"
          PROPERTY="SAP_CONV_MULTI_SWITCH_DO_USER_PRE_CHECKIN"
          THEN="sap_conv_multi_user_pre_checkin1"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_user_pre_checkin>
        <check_user_pre_merge
          COMMENT=""
          ELSE="mergePdf"
          OPERATOR="eq"
          POSX="400"
          POSY="1300"
          PROPERTY="SAP_CONV_MULTI_SWITCH_DO_USER_PRE_MERGE"
          THEN="sap_conv_multi_user_pre_merge"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_user_pre_merge>
        <dpf4c_error
          COMMENT=""
          ERROR="END"
          NEXT="END"
          POSX="900"
          POSY="3000"
          TYPE="SWF"
          USE="dpf4c_error"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </dpf4c_error>
        <dpf4c_plm_data_mapping
          COMMENT=""
          ERROR="dpf4c_error"
          NEXT="sap_conv_multi"
          POSX="200"
          POSY="500"
          TYPE="SWF"
          USE="dpf4c_plm_data_mapping"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </dpf4c_plm_data_mapping>
        <dpf4c_read_ini_file
          COMMENT=""
          ERROR="dpf4c_error"
          NAME="dpf4c_read_ini_file"
          NEXT="dpf4c_plm_data_mapping"
          POSX="200"
          POSY="300"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </dpf4c_read_ini_file>
        <enable_pdfadapt
          COMMENT=""
          NEXT="pdfpostproc"
          POSX="600"
          POSY="2000"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            ENABLE_PDFADAPT="Y"
            />
        </enable_pdfadapt>
        <mergePdf
          COMMENT=""
          ERROR="dpf4c_error"
          NAME="Pdf.merge"
          NEXT="check_stamp"
          POSX="400"
          POSY="1500"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="DIRECT"
            />
          <DEFAULTS
            PDFMERGE_MAKE_TAR="N"
            PdfMergeBookmarkFiles="N"
            WU_ENABLE_DEBUG_LOOP="N"
            />
          <MAPPING/>
        </mergePdf>
        <pdfpostproc
          COMMENT=""
          ERROR="dpf4c_error"
          NEXT="set_currfilename"
          POSX="400"
          POSY="2100"
          TYPE="SWF"
          USE="DPF4CONVERT.pdfpostproc"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </pdfpostproc>
        <pdfstamp
          COMMENT=""
          ERROR="dpf4c_error"
          NAME="pdfstamp"
          NEXT="check_pdfa"
          POSX="600"
          POSY="1800"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </pdfstamp>
        <sap_conv_multi
          COMMENT=""
          ERROR="dpf4c_error"
          NAME="DPF4CONVERT.sap_conv_multi"
          NEXT="check_merge"
          POSX="200"
          POSY="700"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="DIRECT"
            />
          <DEFAULTS
            SubProcess="dpf4convert"
            />
          <MAPPING/>
        </sap_conv_multi>
        <sap_conv_multi_checkin
          COMMENT=""
          ERROR="dpf4c_error"
          NAME="DPF4CONVERT.sap_conv_multi_checkin"
          NEXT="END"
          POSX="200"
          POSY="3000"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="HORIZONTAL"
            />
          <DEFAULTS/>
          <MAPPING/>
        </sap_conv_multi_checkin>
        <sap_conv_multi_user_pre_checkin1
          COMMENT=""
          ERROR="dpf4c_error"
          NEXT="check_sap_char_update"
          POSX="400"
          POSY="2500"
          TYPE="SWF"
          USE="sap_conv_multi_user_pre_checkin"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </sap_conv_multi_user_pre_checkin1>
        <sap_conv_multi_user_pre_merge
          COMMENT=""
          ERROR="dpf4c_error"
          NEXT="mergePdf"
          POSX="600"
          POSY="1400"
          TYPE="SWF"
          USE="sap_conv_multi_user_pre_merge"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </sap_conv_multi_user_pre_merge>
        <save_destfilename
          COMMENT=""
          NEXT="set_jobdir_destfilename"
          POSX="600"
          POSY="1000"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            SAP_CONV_MULTI_DESTFILENAME="%DESTFILENAME%"
            />
        </save_destfilename>
        <set_currfilename
          COMMENT=""
          NEXT="check_user_pre_checkin"
          POSX="400"
          POSY="2300"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="VERTICAL"
            />
          <SET
            CurrFileName000001="%CurrFileName%"
            CurrFileName000002=""
            />
        </set_currfilename>
        <set_default_destfilename
          COMMENT=""
          NEXT="check_user_pre_merge"
          POSX="400"
          POSY="1100"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            DESTFILENAME="%JOBDIR%/mergePdf.pdf"
            SAP_CONV_MULTI_DESTFILENAME="%JOBDIR%/mergePdf.pdf"
            />
        </set_default_destfilename>
        <set_jobdir_destfilename
          COMMENT=""
          NEXT="check_user_pre_merge"
          POSX="600"
          POSY="1200"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            DESTFILENAME="%JOBDIR%/%SAP_CONV_MULTI_DESTFILENAME.fileName%"
            />
        </set_jobdir_destfilename>
        <version_dpf4c
          COMMENT=""
          ERROR="dpf4c_error"
          NEXT="dpf4c_read_ini_file"
          POSX="200"
          POSY="100"
          TYPE="SWF"
          USE="version_dpf4c"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </version_dpf4c>
        <write_std_params1
          COMMENT=""
          ERROR="dpf4c_error"
          NAME="write_std_params"
          NEXT="check_skip_checkin"
          POSX="400"
          POSY="2700"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </write_std_params1>
      </sap_conv_multi>
    </workflows>
  </config>
</DPF>
