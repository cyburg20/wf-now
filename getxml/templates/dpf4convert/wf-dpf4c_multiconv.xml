<?xml version="1.0" encoding="ISO-8859-1"?>
<DPF>
  <config>
    <workflows>
      <dpf4c_multiconv
        COMMENT="dpf4convert - PROCESS FOR MULTI FILE CONVERTION"
        DPFINT-Type="WorkflowDescription"
        NAME="DPF 4 Convert - SubProcess dpf4c_multiconv"
        PROJECT="BCXDC_RFC_SERVER"
        VERSION="$Id: wf-dpf4c_multiconv.xml,v 1.10 2015/08/24 11:43:32 kig Exp $"
        >
        <DEFAULTS/>
        <DPF4CONVERT.exit_process1
          COMMENT=""
          ERROR="END"
          NAME="exit_process"
          NEXT="END"
          POSX="1800"
          POSY="600"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </DPF4CONVERT.exit_process1>
        <DPF4CONVERT.msgconvert1
          COMMENT=""
          ERROR="check_form_of_assignment"
          NEXT="dpf4c_checkin1"
          POSX="1000"
          POSY="800"
          TYPE="SWF"
          USE="DPF4CONVERT.msgconvert"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </DPF4CONVERT.msgconvert1>
        <DPF4CONVERT.setfiletype1
          COMMENT=""
          ERROR="END"
          NAME="DPF4CONVERT.setfiletype"
          NEXT="IF-THEN-ELSE2"
          POSX="500"
          POSY="700"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="VERTICAL"
            />
          <DEFAULTS/>
          <MAPPING/>
        </DPF4CONVERT.setfiletype1>
        <END
          COMMENT=""
          NAME="END"
          POSX="1300"
          POSY="200"
          TYPE="STOP"
          />
        <IF-THEN-ELSE1
          COMMENT=""
          ELSE="convert_single_file"
          OPERATOR="eq"
          POSX="600"
          POSY="500"
          PROPERTY="MSG2PDF_ACTIVATE_ATTACH"
          THEN="DPF4CONVERT.setfiletype1"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="HORIZONTAL"
            />
        </IF-THEN-ELSE1>
        <IF-THEN-ELSE2
          COMMENT=""
          ELSE="convert_single_file"
          OPERATOR="eq"
          POSX="600"
          POSY="800"
          PROPERTY="CURRFILETYPE"
          THEN="MODIFY1"
          TYPE="IF-THEN-ELSE"
          VALUE="MSG"
          >
          <CONNECTIONS
            ELSE="HORIZONTAL"
            THEN="DIRECT"
            />
        </IF-THEN-ELSE2>
        <MAIN
          BEGIN="set_steering_parameters"
          ERROR="check_form_of_assignment"
          LOGLEVEL="I"
          />
        <MAPPING/>
        <MODIFY1
          COMMENT=""
          NEXT="DPF4CONVERT.msgconvert1"
          POSX="800"
          POSY="800"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            CURRFILENAME="%INFILE1%"
            />
        </MODIFY1>
        <check_form_of_assignment
          COMMENT=""
          ELSE="settings_synchron_error"
          OPERATOR="contains"
          POSX="1100"
          POSY="400"
          PROPERTY="DPF_FORM_OF_ASSIGNMENT"
          THEN="check_if_all_files_failed"
          TYPE="IF-THEN-ELSE"
          VALUE="A"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_form_of_assignment>
        <check_if_all_files_failed
          COMMENT=""
          ELSE="sp-dpf4c_error"
          OPERATOR="is"
          POSX="1300"
          POSY="400"
          PROPERTY="CONVERSION_ALL_FILES_FAILED"
          THEN="get_jobstate"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_if_all_files_failed>
        <check_single_file_conversion
          COMMENT=""
          ELSE="checkin"
          OPERATOR="contains"
          POSX="800"
          POSY="400"
          PROPERTY="COUNT_SOURCE_FILES"
          THEN="IF-THEN-ELSE1"
          TYPE="IF-THEN-ELSE"
          VALUE="1"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_single_file_conversion>
        <checkin
          COMMENT=""
          ERROR="check_form_of_assignment"
          NEXT="END"
          POSX="1000"
          POSY="300"
          TYPE="SWF"
          USE="dpf4c_checkin"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </checkin>
        <convert_files
          COMMENT=""
          ERROR="check_form_of_assignment"
          NAME="convert_files"
          NEXT="check_single_file_conversion"
          POSX="800"
          POSY="200"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </convert_files>
        <convert_single_file
          COMMENT=""
          ERROR="check_form_of_assignment"
          NEXT="END"
          POSX="800"
          POSY="600"
          TYPE="SWF"
          USE="dpf4convert"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </convert_single_file>
        <dpf4c_checkin1
          COMMENT=""
          ERROR="check_form_of_assignment"
          NEXT="END"
          POSX="1200"
          POSY="800"
          TYPE="SWF"
          USE="dpf4c_checkin"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </dpf4c_checkin1>
        <dpf4c_error_error
          COMMENT=""
          NEXT="DPF4CONVERT.exit_process1"
          POSX="1700"
          POSY="400"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="VERTICAL"
            />
          <SET
            ERR_REASON="Error during dpf4c_error"
            ERR_WFNAME="dpf4c_multiconv"
            ERR_WFPOSITION="dpf4c_error_error"
            />
        </dpf4c_error_error>
        <get_jobstate
          COMMENT=""
          ERROR="get_jobstate_by_subjobidextern_error"
          NAME="get_jobstate"
          NEXT="sp-dpf4c_error"
          POSX="1500"
          POSY="200"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </get_jobstate>
        <get_jobstate_by_subjobidextern_error
          COMMENT=""
          NEXT="DPF4CONVERT.exit_process1"
          POSX="1700"
          POSY="200"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="VERTICAL"
            />
          <SET
            ERR_REASON="Error retrieving jobstate for SUBJOBIDEXTERN=&lt;%SUBJOBIDEXTRN%&gt;"
            ERR_WFNAME="dpf4c_multiconv"
            ERR_WFPOSITION="get_jobstate_by_subjobidextern_error"
            />
        </get_jobstate_by_subjobidextern_error>
        <get_jobstate_error
          COMMENT=""
          NEXT="DPF4CONVERT.exit_process1"
          POSX="1600"
          POSY="600"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            ERR_REASON="Error during getjobstate"
            ERR_WFNAME="dpf4c_multiconv"
            ERR_WFPOSITION="get_jobstate_error"
            />
        </get_jobstate_error>
        <plm_data_mapping
          COMMENT=""
          ERROR="check_form_of_assignment"
          NAME="plm_data_mapping"
          NEXT="convert_files"
          POSX="500"
          POSY="200"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </plm_data_mapping>
        <set_steering_parameters
          CASE:A="settings_asynchron"
          CASE:S="settings_synchron"
          COMMENT=""
          CONNECTION:A="DIRECT"
          CONNECTION:DEFAULT="DIRECT"
          CONNECTION:S="DIRECT"
          DEFAULT="settings_synchron"
          POSX="100"
          POSY="200"
          PROPERTY="DPF_FORM_OF_ASSIGNMENT"
          TYPE="SWITCH"
          />
        <settings_asynchron
          COMMENT=""
          NEXT="plm_data_mapping"
          POSX="300"
          POSY="400"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            ENABLE_MAP_NAMES_AND_VALUES_OF_DPF_PARAMETERS="Y"
            JOBNAME="SPOOLREQUEST=%SPOOLREQUEST%"
            />
        </settings_asynchron>
        <settings_synchron
          COMMENT=""
          NEXT="plm_data_mapping"
          POSX="300"
          POSY="200"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            DPF4C_ERROR_DO_NOTHING="Y"
            ENABLE_MAP_NAMES_AND_VALUES_OF_DPF_PARAMETERS="Y"
            />
        </settings_synchron>
        <settings_synchron_error
          COMMENT=""
          NEXT="sp-getjobstate"
          POSX="1100"
          POSY="600"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            TARGETFILE="DpfStatus.txt"
            />
        </settings_synchron_error>
        <sp-dpf4c_error
          COMMENT=""
          ERROR="dpf4c_error_error"
          NEXT="END"
          POSX="1500"
          POSY="500"
          TYPE="SWF"
          USE="dpf4c_error"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </sp-dpf4c_error>
        <sp-getjobstate
          COMMENT=""
          ERROR="get_jobstate_error"
          NEXT="sp-dpf4c_error"
          POSX="1300"
          POSY="600"
          TYPE="SWF"
          USE="getjobstate"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </sp-getjobstate>
      </dpf4c_multiconv>
    </workflows>
  </config>
</DPF>
