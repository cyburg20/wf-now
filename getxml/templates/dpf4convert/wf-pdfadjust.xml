<?xml version="1.0" encoding="ISO-8859-1"?>
<DPF>
  <config>
    <workflows>
      <pdfadjust
        COMMENT="dpf4convert - Try to adjust a pdf file"
        DPFINT-Type="WorkflowDescription"
        NAME="DPF 4 Convert - pdfadjust"
        PROJECT="DPF4CONVERT"
        VERSION="$Id: wf-pdfadjust.xml,v 1.22 2009/02/06 13:09:04 kig Exp $"
        >
        <DEFAULTS/>
        <END
          COMMENT=""
          NAME="END"
          POSX="5100"
          POSY="200"
          TYPE="STOP"
          />
        <IF-THEN-ELSE1
          COMMENT=""
          ELSE="check_switch_pdf_convert"
          OPERATOR="contains"
          POSX="600"
          POSY="800"
          PROPERTY="ENABLE_PDF_ADJUST_EMBED_PROBLEMATIC_FONTS_USING_CONVERSION_PDF2PS2PDF"
          THEN="MODIFY1"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </IF-THEN-ELSE1>
        <MAIN
          BEGIN="check_switch_pdfadjust"
          ERROR="END"
          />
        <MAPPING/>
        <MODIFY1
          COMMENT=""
          NEXT="check_switch_pdf_convert"
          POSX="800"
          POSY="900"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            ENABLE_PDF_CONVERT="Y"
            />
        </MODIFY1>
        <check_further_adjust_on_desired_level
          COMMENT=""
          ELSE="pdfadjust_final_checks"
          OPERATOR="contains"
          POSX="400"
          POSY="700"
          PROPERTY="FURTHER_ADJUSTS_NEEDED_FOR_DESIRED_LEVEL"
          THEN="IF-THEN-ELSE1"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_further_adjust_on_desired_level>
        <check_pdf_ok_before_optional_pdfmeta
          COMMENT=""
          ELSE="check_switch_pdfmeta_already_executed"
          OPERATOR="contains"
          POSX="600"
          POSY="2300"
          PROPERTY="FILE_CHECK_PDFCHECKER_RESULT_LEVEL"
          THEN="check_switch_pdfraster_if_not_ok"
          TYPE="IF-THEN-ELSE"
          VALUE="OK"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_pdf_ok_before_optional_pdfmeta>
        <check_pdf_ok_before_raster
          COMMENT=""
          ELSE="pdfraster"
          OPERATOR="contains"
          POSX="800"
          POSY="3800"
          PROPERTY="FILE_CHECK_PDFCHECKER_RESULT_LEVEL"
          THEN="pdfadjust_final_checks"
          TYPE="IF-THEN-ELSE"
          VALUE="OK"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_pdf_ok_before_raster>
        <check_remove_security_origfiletype_empty
          COMMENT=""
          ELSE="check_remove_security_origfiletype_pdf"
          OPERATOR="eq"
          POSX="800"
          POSY="1900"
          PROPERTY="ORIGFILETYPE"
          THEN="pdfcrypt_remove_security"
          TYPE="IF-THEN-ELSE"
          VALUE=""
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_remove_security_origfiletype_empty>
        <check_remove_security_origfiletype_pdf
          COMMENT=""
          ELSE="pdfcrypt_remove_security"
          OPERATOR="ne"
          POSX="800"
          POSY="2100"
          PROPERTY="ORIGFILETYPE"
          THEN="check_pdf_ok_before_optional_pdfmeta"
          TYPE="IF-THEN-ELSE"
          VALUE="pdf"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_remove_security_origfiletype_pdf>
        <check_repair_pdfmeta
          COMMENT=""
          ERROR="END"
          NAME="pdfmeta"
          NEXT="pdfchecker_repair_pdfmeta"
          POSX="800"
          POSY="2800"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </check_repair_pdfmeta>
        <check_switch_check_gs
          COMMENT=""
          ELSE="check_switch_check_pdfmerge"
          OPERATOR="contains"
          POSX="600"
          POSY="1400"
          PROPERTY="ENABLE_PDF_CHECK_GS"
          THEN="pdfcheckgs_gs_pdf2pdf"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_switch_check_gs>
        <check_switch_check_pdfmerge
          COMMENT=""
          ELSE="check_switch_remove_security"
          OPERATOR="contains"
          POSX="600"
          POSY="1600"
          PROPERTY="ENABLE_PDF_CHECK_PDFMERGE"
          THEN="pdfcheckmerge_raster"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_switch_check_pdfmerge>
        <check_switch_pdf_convert
          COMMENT=""
          ELSE="check_switch_check_gs"
          OPERATOR="contains"
          POSX="600"
          POSY="1000"
          PROPERTY="ENABLE_PDF_CONVERT"
          THEN="pdf_convert"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_switch_pdf_convert>
        <check_switch_pdf_status_after_pdfmeta
          CASE:OK="check_switch_pdfraster_if_not_ok"
          CASE:WARN="check_switch_pdfraster_if_not_ok"
          COMMENT=""
          CONNECTION:DEFAULT="DIRECT"
          CONNECTION:OK="DIRECT"
          CONNECTION:WARN="DIRECT"
          DEFAULT="set_restore_currfilename_before_pdfmeta"
          POSX="800"
          POSY="3200"
          PROPERTY="FILE_CHECK_PDFCHECKER_RESULT_LEVEL"
          TYPE="SWITCH"
          />
        <check_switch_pdfadjust
          COMMENT=""
          ELSE="END"
          OPERATOR="contains"
          POSX="200"
          POSY="200"
          PROPERTY="ENABLE_PDF_ADJUST_PROCESS"
          THEN="sp-pdfadjust_settings"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_switch_pdfadjust>
        <check_switch_pdfmeta_already_executed
          COMMENT=""
          ELSE="set_save_currfilename_before_pdfmeta"
          OPERATOR="contains"
          POSX="800"
          POSY="2400"
          PROPERTY="PDFMETA_EXECUTED"
          THEN="check_switch_pdfraster_if_not_ok"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="VERTICAL"
            />
        </check_switch_pdfmeta_already_executed>
        <check_switch_pdfraster_if_not_ok
          COMMENT=""
          ELSE="pdfadjust_final_checks"
          OPERATOR="contains"
          POSX="600"
          POSY="3500"
          PROPERTY="ENABLE_PDF_RASTER_IF_NOT_OK"
          THEN="pdfchecker_before_raster"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_switch_pdfraster_if_not_ok>
        <check_switch_remove_security
          COMMENT=""
          ELSE="check_pdf_ok_before_optional_pdfmeta"
          OPERATOR="contains"
          POSX="600"
          POSY="1800"
          PROPERTY="ENABLE_REMOVE_SECURITY"
          THEN="check_remove_security_origfiletype_empty"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_switch_remove_security>
        <pdf_convert
          COMMENT=""
          ERROR="END"
          NEXT="set_file_modified"
          POSX="800"
          POSY="1100"
          TYPE="SWF"
          USE="pdf_convert2pdfa"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </pdf_convert>
        <pdfadjust_final_checks
          COMMENT=""
          ERROR="END"
          NEXT="END"
          POSX="400"
          POSY="4100"
          TYPE="SWF"
          USE="pdfadjust_final_checks"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </pdfadjust_final_checks>
        <pdfchecker_before_raster
          COMMENT=""
          ERROR="END"
          NAME="pdfchecker"
          NEXT="check_pdf_ok_before_raster"
          POSX="800"
          POSY="3600"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </pdfchecker_before_raster>
        <pdfchecker_repair_pdfmeta
          COMMENT=""
          ERROR="END"
          NAME="pdfchecker"
          NEXT="check_switch_pdf_status_after_pdfmeta"
          POSX="800"
          POSY="3000"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </pdfchecker_repair_pdfmeta>
        <pdfcheckgs_gs_pdf2pdf
          COMMENT=""
          ERROR="END"
          NEXT="check_switch_check_pdfmerge"
          POSX="800"
          POSY="1500"
          TYPE="SWF"
          USE="pdfcheckgs_gs_pdf2pdf"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </pdfcheckgs_gs_pdf2pdf>
        <pdfcheckmerge_raster
          COMMENT=""
          ERROR="END"
          NEXT="check_switch_remove_security"
          POSX="800"
          POSY="1700"
          TYPE="SWF"
          USE="pdfcheckmerge_raster"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </pdfcheckmerge_raster>
        <pdfcrypt_remove_security
          COMMENT=""
          ERROR="END"
          NAME="pdfcrypt"
          NEXT="check_pdf_ok_before_optional_pdfmeta"
          POSX="1000"
          POSY="2200"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </pdfcrypt_remove_security>
        <pdfraster
          COMMENT=""
          ERROR="END"
          NEXT="pdfadjust_final_checks"
          POSX="800"
          POSY="4000"
          TYPE="SWF"
          USE="pdfraster"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </pdfraster>
        <select_pdfadjust_process
          COMMENT=""
          ELSE="check_further_adjust_on_desired_level"
          OPERATOR="contains"
          POSX="400"
          POSY="500"
          PROPERTY="ENABLE_PDFADJUSTLLS_PROCESS"
          THEN="sp-pdfadjustlls"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </select_pdfadjust_process>
        <set_file_modified
          COMMENT=""
          NEXT="check_switch_check_gs"
          POSX="800"
          POSY="1300"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            PDF_CHECK_ADJUST_FILE_MODIFIED="Y"
            />
        </set_file_modified>
        <set_restore_currfilename_before_pdfmeta
          COMMENT=""
          NEXT="check_switch_pdfraster_if_not_ok"
          POSX="800"
          POSY="3400"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            CURRFILENAME="%CURRFILENAME_SAVE_PDFMETA%"
            PDF_CHECK_ADJUST_FILE_MODIFIED="%PDF_CHECK_ADJUST_FILE_MODIFIED_SAVE_PDFMETA%"
            />
        </set_restore_currfilename_before_pdfmeta>
        <set_save_currfilename_before_pdfmeta
          COMMENT=""
          NEXT="check_repair_pdfmeta"
          POSX="800"
          POSY="2600"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            CURRFILENAME_SAVE_PDFMETA="%CURRFILENAME%"
            PDFMETA_TEST_FOR_RETURN_VALUE="Y"
            PDF_CHECK_ADJUST_FILE_MODIFIED_SAVE_PDFMETA="%PDF_CHECK_ADJUST_FILE_MODIFIED%"
            />
        </set_save_currfilename_before_pdfmeta>
        <sp-pdfadjust_settings
          COMMENT=""
          ERROR="END"
          NEXT="select_pdfadjust_process"
          POSX="400"
          POSY="300"
          TYPE="SWF"
          USE="pdfadjust_settings"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </sp-pdfadjust_settings>
        <sp-pdfadjustlls
          COMMENT=""
          ERROR="END"
          NEXT="check_further_adjust_on_desired_level"
          POSX="600"
          POSY="600"
          TYPE="SWF"
          USE="pdfadjustlls"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </sp-pdfadjustlls>
      </pdfadjust>
    </workflows>
  </config>
</DPF>
