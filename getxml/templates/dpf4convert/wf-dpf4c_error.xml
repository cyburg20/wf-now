<?xml version="1.0" encoding="ISO-8859-1"?>
<DPF>
  <config>
    <workflows>
      <dpf4c_error
        COMMENT="dpf4convert - PROCESS FOR ERROR HANDLING FOR DPF4CONVERT"
        DPFINT-Type="WorkflowDescription"
        NAME="DPF 4 Convert - SubProcess dpf4c_error"
        PROJECT="DPF4CONVERT"
        VERSION="$Id: wf-dpf4c_error.xml,v 1.17 2012/11/19 07:03:06 kig Exp $"
        >
        <DEFAULTS/>
        <DPF4CONVERT.logenv1
          COMMENT=""
          ERROR="END"
          NEXT="check_switch_do_user_pre_dpf4c_error"
          POSX="300"
          POSY="200"
          TYPE="SWF"
          USE="DPF4CONVERT.logenv"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </DPF4CONVERT.logenv1>
        <END
          COMMENT=""
          NAME="END"
          POSX="1000"
          POSY="2100"
          TYPE="STOP"
          />
        <MAIN
          BEGIN="DPF4CONVERT.logenv1"
          ERROR="END"
          />
        <MAPPING/>
        <check_do_nothing_on_error
          COMMENT=""
          ELSE="check_send_error_email"
          OPERATOR="contains"
          POSX="300"
          POSY="600"
          PROPERTY="DPF4C_ERROR_DO_NOTHING"
          THEN="END"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_do_nothing_on_error>
        <check_plm_send_error
          COMMENT=""
          ELSE="END"
          OPERATOR="contains"
          POSX="300"
          POSY="1300"
          PROPERTY="DPF4C_ERROR_PLM"
          THEN="check_plm_system"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_plm_send_error>
        <check_plm_system
          CASE:gxnetplot="send_error_message_gxnetplot"
          CASE:no_plm_system="END"
          CASE:sap="send_error_message_sap"
          CASE:sap_direct="send_error_message_sap_file_direct"
          CASE:send_job_state_file="send_job_state_file"
          COMMENT=""
          CONNECTION:DEFAULT="HORIZONTAL"
          CONNECTION:gxnetplot="HORIZONTAL"
          CONNECTION:no_plm_system="VERTICAL"
          CONNECTION:sap="HORIZONTAL"
          CONNECTION:sap_direct="HORIZONTAL"
          CONNECTION:send_job_state_file="HORIZONTAL"
          DEFAULT="error_not_supported_plmsystemname"
          POSX="300"
          POSY="1500"
          PROPERTY="DPF4C_COMMON_PLM_SYSTEM_NAME"
          TYPE="SWITCH"
          />
        <check_save_error_data
          COMMENT=""
          ELSE="check_plm_send_error"
          OPERATOR="contains"
          POSX="300"
          POSY="1000"
          PROPERTY="DPF4C_ERROR_SAVE"
          THEN="save_error_data"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_save_error_data>
        <check_send_error_email
          COMMENT=""
          ELSE="check_save_error_data"
          OPERATOR="contains"
          POSX="300"
          POSY="800"
          PROPERTY="DPF4C_ERROR_MAIL"
          THEN="compose_error_mail"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_send_error_email>
        <check_switch_do_user_pre_dpf4c_error
          COMMENT=""
          ELSE="check_do_nothing_on_error"
          OPERATOR="contains"
          POSX="300"
          POSY="400"
          PROPERTY="DPF4C_SWITCH_DO_USER_PRE_DPF4C_ERROR"
          THEN="sp-user_pre_dpf4c_error"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_switch_do_user_pre_dpf4c_error>
        <compose_error_mail
          COMMENT=""
          ERROR="END"
          NAME="compose_error_mail"
          NEXT="sendmail"
          POSX="500"
          POSY="800"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </compose_error_mail>
        <error_not_supported_plmsystemname
          COMMENT=""
          NEXT="END"
          POSX="600"
          POSY="2000"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            ERR_REASON="Error: This dpf parameter value DPF4C_COMMON_PLM_SYSTEM_NAME -%DPF4C_COMMON_PLM_SYSTEM_NAME%- is not supported for sending error message to plm system!"
            ERR_WFNAME="DPF4C_ERROR"
            ERR_WFPOSITION="check_plm_system"
            />
        </error_not_supported_plmsystemname>
        <save_error_data
          COMMENT=""
          ERROR="END"
          NAME="save_error_data"
          NEXT="check_plm_send_error"
          POSX="500"
          POSY="1200"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </save_error_data>
        <send_error_message_gxnetplot
          COMMENT=""
          ERROR="END"
          NAME="send_error_message_gxnetplot"
          NEXT="END"
          POSX="800"
          POSY="1700"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </send_error_message_gxnetplot>
        <send_error_message_sap
          COMMENT=""
          ERROR="END"
          NAME="send_error_message_sap"
          NEXT="END"
          POSX="800"
          POSY="1900"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </send_error_message_sap>
        <send_error_message_sap_file_direct
          COMMENT=""
          ERROR="END"
          NEXT="END"
          POSX="600"
          POSY="1800"
          TYPE="SWF"
          USE="send_error_message_sap_file_direct"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </send_error_message_sap_file_direct>
        <send_job_state_file
          COMMENT=""
          ERROR="END"
          NEXT="END"
          POSX="600"
          POSY="1600"
          TYPE="SWF"
          USE="send_job_state_file"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </send_job_state_file>
        <sendmail
          COMMENT=""
          ERROR="END"
          NAME="sendmail"
          NEXT="check_save_error_data"
          POSX="500"
          POSY="1000"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </sendmail>
        <sp-user_pre_dpf4c_error
          COMMENT=""
          ERROR="END"
          NEXT="check_do_nothing_on_error"
          POSX="500"
          POSY="500"
          TYPE="SWF"
          USE="dpf4c_user_pre_error"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </sp-user_pre_dpf4c_error>
      </dpf4c_error>
    </workflows>
  </config>
</DPF>
