<?xml version="1.0" encoding="ISO-8859-1"?>
<DPF>
  <config>
    <workflows>
      <DPF4CONVERT.pdflog
        COMMENT=""
        DPFINT-Customer="0"
        DPFINT-Interactive="0"
        DPFINT-Type="WorkflowDescription"
        NAME="Pdflog - Log defective Pdfs"
        PROJECT="DPF4CONVERT"
        VERSION="$Id: wf-pdflog.xml,v 1.6 2014/01/10 17:49:23 sek Exp $"
        >
        <CopyFiles
          COMMENT=""
          ERROR="END"
          NAME="FileTransfer.copyFiles"
          NEXT="WriteCsvLine"
          POSX="400"
          POSY="1100"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS>
            <COPY_DEBUG
              val="N"
              />
            <WU_ENABLE_DEBUG_LOOP
              val="N"
              />
          </DEFAULTS>
          <MAPPING
            COPY_SOURCE_PROPERTIES="PdfLlsInfoPdf PdfLlsInfoHtml PdfLlsInfoXml PdfAdaptXml PdfAdaptInternalXml PDFINFO_FILE JobLog"
            COPY_TARGETDIR="%PdfLogJobDir%"
            IgnoreMissingFiles="Y"
            />
        </CopyFiles>
        <CreatePdfLogDirectory
          COMMENT=""
          ERROR="END"
          NAME="FileSystem.CreateDirectory"
          NEXT="IfPdfInfoFileExists"
          POSX="400"
          POSY="500"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING
            DIRECTORY="%PdfLogJobDir%"
            />
        </CreatePdfLogDirectory>
        <DEFAULTS/>
        <END
          COMMENT=""
          NAME="END"
          POSX="200"
          POSY="100"
          TYPE="STOP"
          />
        <EnablePdfPreProc
          COMMENT=""
          NEXT="PdfInfo"
          POSX="600"
          POSY="700"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            ENABLE_PDFPREPROC="Y"
            />
        </EnablePdfPreProc>
        <IfPdfInfoFileExists
          COMMENT=""
          ELSE="EnablePdfPreProc"
          OPERATOR="is file"
          POSX="400"
          POSY="700"
          PROPERTY="PDFINFO_FILE"
          THEN="SetInputFiles"
          TYPE="IF-THEN-ELSE"
          VALUE=""
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </IfPdfInfoFileExists>
        <IfSetPdfLogDir
          COMMENT=""
          ELSE="END"
          OPERATOR="ne"
          POSX="400"
          POSY="100"
          PROPERTY="PDFLOG_DIR"
          THEN="SetPdfLogJobDir"
          TYPE="IF-THEN-ELSE"
          VALUE=""
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </IfSetPdfLogDir>
        <MAIN
          BEGIN="IfSetPdfLogDir"
          NAME=""
          />
        <MAPPING/>
        <PdfInfo
          COMMENT=""
          ERROR="END"
          NEXT="SetInputFiles"
          POSX="600"
          POSY="900"
          TYPE="SWF"
          USE="DPF4CONVERT.pdfinfo"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </PdfInfo>
        <SetInputFiles
          COMMENT=""
          NEXT="CopyFiles"
          POSX="400"
          POSY="900"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            JobLog="job.log"
            PdfAdaptInternalXml="%PDFADAPT_ORIGFILENAME%.xml.internal.xml"
            PdfAdaptXml="%PDFADAPT_ORIGFILENAME%.xml"
            PdfLlsInfoHtml="%CurrFileName.baseName%.pdfllsinfo.html"
            PdfLlsInfoPdf="%CurrFileName.baseName%.pdfllsinfo.pdf"
            PdfLlsInfoXml="%CurrFileName.baseName%.pdfllsinfo.xml"
            />
        </SetInputFiles>
        <SetPdfLogJobDir
          COMMENT=""
          NEXT="CreatePdfLogDirectory"
          POSX="400"
          POSY="300"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            PdfLogJobDir="%PDFLOG_DIR%/dpfjob%JobId%"
            />
        </SetPdfLogJobDir>
        <WriteCsvLine
          COMMENT=""
          ERROR="END"
          NAME="DPF4CONVERT.WriteCsvLine"
          NEXT="END"
          POSX="400"
          POSY="1300"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS>
            <PDFLOG_CSV_FILE
              val="%PDFLOG_DIR%/pdflog.csv"
              />
            <PDFLOG_CSV_SEP
              val=";"
              />
          </DEFAULTS>
          <MAPPING/>
        </WriteCsvLine>
      </DPF4CONVERT.pdflog>
    </workflows>
  </config>
</DPF>
