<?xml version="1.0" encoding="ISO-8859-1"?>
<DPF>
  <config>
    <workflows>
      <DPF4CONVERT.sap_convert_catia
        COMMENT="dpf4convert - PROCESS SAP CONVERT CATIA.

This process is used to convert Catia-Formats within a SAP integration."
        DPFINT-Customer="0"
        DPFINT-Interactive="1"
        DPFINT-Type="WorkflowDescription"
        NAME="SAP Convert Catia"
        PROJECT="DPF4CONVERT"
        VERSION="$Id: wf-sap_convert_catia.xml,v 1.2 2012/03/16 09:35:38 kig Exp $"
        >
        <DEFAULTS/>
        <DPF4CONVERT.dpf4c_user_pre_catiaconv1
          COMMENT=""
          ERROR="sp-dpf4c_error"
          NEXT="switch_2d_3d"
          POSX="100"
          POSY="1000"
          TYPE="SWF"
          USE="DPF4CONVERT.dpf4c_user_pre_catiaconv"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </DPF4CONVERT.dpf4c_user_pre_catiaconv1>
        <END
          COMMENT=""
          NAME="END"
          POSX="800"
          POSY="2000"
          TYPE="STOP"
          />
        <MAIN
          BEGIN="version_dpf4c"
          ERROR="sp-dpf4c_error"
          LOGLEVEL="I"
          />
        <MAPPING/>
        <catdrawing2file
          COMMENT=""
          ERROR="sp-dpf4c_error"
          NEXT="set_2d_prog33"
          POSX="300"
          POSY="1500"
          TYPE="SWF"
          USE="DPF4CONVERT.catdrawing2file"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </catdrawing2file>
        <catproduct2file
          COMMENT=""
          ERROR="sp-dpf4c_error"
          NEXT="set_3d_prog66"
          POSX="600"
          POSY="1600"
          TYPE="SWF"
          USE="DPF4CONVERT.catproduct2file"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </catproduct2file>
        <check_activate_pdfadapt
          COMMENT=""
          ELSE="pdfpostproc"
          OPERATOR="contains"
          POSX="300"
          POSY="2900"
          PROPERTY="DESTINATION_FORMAT_QUALITY"
          THEN="enable_pdfadapt"
          TYPE="IF-THEN-ELSE"
          VALUE="pdfa"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_activate_pdfadapt>
        <check_pdf_processing
          COMMENT=""
          ELSE="set_2d_prog83"
          OPERATOR="eq"
          POSX="300"
          POSY="1900"
          PROPERTY="CURRFILETYPE"
          THEN="pdfprocess"
          TYPE="IF-THEN-ELSE"
          VALUE="pdf"
          >
          <CONNECTIONS
            ELSE="VERTICAL"
            THEN="DIRECT"
            />
        </check_pdf_processing>
        <check_user_pre_catiaconv
          COMMENT=""
          ELSE="switch_2d_3d"
          OPERATOR="eq"
          POSX="300"
          POSY="900"
          PROPERTY="DPF4C_SWITCH_USER_PRE_CATIACONV"
          THEN="DPF4CONVERT.dpf4c_user_pre_catiaconv1"
          TYPE="IF-THEN-ELSE"
          VALUE="Y"
          >
          <CONNECTIONS
            ELSE="DIRECT"
            THEN="DIRECT"
            />
        </check_user_pre_catiaconv>
        <enable_pdfadapt
          COMMENT=""
          NEXT="pdfpostproc"
          POSX="100"
          POSY="3000"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            ENABLE_PDFADAPT="Y"
            />
        </enable_pdfadapt>
        <pdfpostproc
          COMMENT=""
          ERROR="sp-dpf4c_error"
          NEXT="set_2d_prog83"
          POSX="300"
          POSY="3100"
          TYPE="SWF"
          USE="DPF4CONVERT.pdfpostproc"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="HORIZONTAL"
            />
          <DEFAULTS/>
          <MAPPING/>
        </pdfpostproc>
        <pdfprocess
          COMMENT=""
          ERROR="sp-dpf4c_error"
          NEXT="set_2d_prog50"
          POSX="300"
          POSY="2100"
          TYPE="SWF"
          USE="DPF4CONVERT.pdfprocess"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </pdfprocess>
        <pdftarget
          COMMENT=""
          ERROR="sp-dpf4c_error"
          NEXT="set_2d_prog66"
          POSX="300"
          POSY="2500"
          TYPE="SWF"
          USE="DPF4CONVERT.pdftarget"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </pdftarget>
        <sap_get_data
          COMMENT=""
          ERROR="sp-dpf4c_error"
          NEXT="check_user_pre_catiaconv"
          POSX="300"
          POSY="700"
          TYPE="SWF"
          USE="DPF4CONVERT.sap_get_data"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </sap_get_data>
        <sap_put_data
          COMMENT=""
          ERROR="sp-dpf4c_error"
          NEXT="set_prog100"
          POSX="600"
          POSY="3300"
          TYPE="SWF"
          USE="DPF4CONVERT.sap_put_data"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </sap_put_data>
        <sap_readcustomconfig
          COMMENT=""
          ERROR="sp-dpf4c_error"
          NAME="DPF4CONVERT.sap_readcustomconfig"
          NEXT="sap_get_data"
          POSX="300"
          POSY="500"
          TYPE="WU"
          >
          <CONNECTIONS
            ERROR="VERTICAL"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </sap_readcustomconfig>
        <set_2d_prog33
          COMMENT=""
          NEXT="check_pdf_processing"
          POSX="300"
          POSY="1700"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            DPFJOBPROGRESS="33"
            />
        </set_2d_prog33>
        <set_2d_prog50
          COMMENT=""
          NEXT="pdftarget"
          POSX="300"
          POSY="2300"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            DPFJOBPROGRESS="50"
            />
        </set_2d_prog50>
        <set_2d_prog66
          COMMENT=""
          NEXT="check_activate_pdfadapt"
          POSX="300"
          POSY="2700"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            DPFJOBPROGRESS="66"
            />
        </set_2d_prog66>
        <set_2d_prog83
          COMMENT=""
          NEXT="sap_put_data"
          POSX="400"
          POSY="3300"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="VERTICAL"
            />
          <SET
            DPFJOBPROGRESS="83"
            />
        </set_2d_prog83>
        <set_2d_wu_target
          COMMENT=""
          NEXT="catdrawing2file"
          POSX="300"
          POSY="1300"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            DPF4C_WU_TARGETDIR="%JOBDIR%"
            DPFJOBPROGRESS="17"
            />
        </set_2d_wu_target>
        <set_3d_prog66
          COMMENT=""
          NEXT="sap_put_data"
          POSX="600"
          POSY="1800"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="HORIZONTAL"
            />
          <SET
            DPFJOBPROGRESS="66"
            />
        </set_3d_prog66>
        <set_3d_wu_target
          COMMENT=""
          NEXT="catproduct2file"
          POSX="600"
          POSY="1300"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            DPF4C_WU_TARGETDIR="%JOBDIR%"
            DPFJOBPROGRESS="33"
            />
        </set_3d_wu_target>
        <set_config
          COMMENT=""
          NEXT="sap_readcustomconfig"
          POSX="300"
          POSY="300"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            CURRFILES_SUPPORTED="Y"
            DPF4C_COMMON_PLM_SYSTEM_NAME="sap"
            DPF4C_CUSTOM_CONFIG="dpf4convert::sap_convert,dpf4convert::convert_catia,dpf4convert::error_handling"
            DPFJOBPROGRESS="0"
            />
        </set_config>
        <set_filetype_err
          COMMENT=""
          NEXT="sp-dpf4c_error"
          POSX="700"
          POSY="1100"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="VERTICAL"
            />
          <SET
            ERR_REASON="ERROR: This CURRFILETYPE -%CURRFILETYPE%- is not supported. Only catdrawing, catpart and catproduct is supported!"
            ERR_WFNAME="convert_catia"
            ERR_WFPOSITION="unsupported_currfiletype"
            />
        </set_filetype_err>
        <set_prog100
          COMMENT=""
          NEXT="END"
          POSX="600"
          POSY="3500"
          TYPE="MODIFY"
          >
          <CONNECTIONS
            NEXT="DIRECT"
            />
          <SET
            DPFJOBPROGRESS="100"
            />
        </set_prog100>
        <sp-dpf4c_error
          COMMENT=""
          ERROR="END"
          NEXT="END"
          POSX="900"
          POSY="3500"
          TYPE="SWF"
          USE="dpf4c_error"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </sp-dpf4c_error>
        <switch_2d_3d
          CASE:catdrawing="set_2d_wu_target"
          CASE:catpart="set_3d_wu_target"
          CASE:catproduct="set_3d_wu_target"
          COMMENT=""
          CONNECTION:DEFAULT="VERTICAL"
          CONNECTION:catdrawing="DIRECT"
          CONNECTION:catpart="VERTICAL"
          CONNECTION:catproduct="VERTICAL"
          DEFAULT="set_filetype_err"
          POSX="300"
          POSY="1100"
          PROPERTY="CURRFILETYPE"
          TYPE="SWITCH"
          />
        <version_dpf4c
          COMMENT=""
          ERROR="END"
          NEXT="set_config"
          POSX="300"
          POSY="100"
          TYPE="SWF"
          USE="version_dpf4c"
          >
          <CONNECTIONS
            ERROR="DIRECT"
            NEXT="DIRECT"
            />
          <DEFAULTS/>
          <MAPPING/>
        </version_dpf4c>
      </DPF4CONVERT.sap_convert_catia>
    </workflows>
  </config>
</DPF>
